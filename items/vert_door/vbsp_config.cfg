"Replacements"
{
	"%TEMP%" "TEMP_KONCLAN_VERT_DOOR_CLEAN"
}

"Conditions"
{
	"Condition"
	{
		"instance" "<ITEM_VERT_DOOR>"
		"Result"
		{
			"Condition"
			{
				"instvar" "$start_enabled = 1"
				"Result"
				{
					"addOverlay"
					{
						"File"	"instances/BEE2/logic/items/konclan/vert_door/vert_door.vmf"
					}
					"SetInstVar" "$forceclosed 1"
					"SetInstVar" "$blockingdamage 200"
				}
			}
			
			"ChangeInstance" "instances/BEE2/clean/items/konclan/vert_door/vert_door.vmf"
			
			"TemplateBrush"
			{
				"ID" "%TEMP%:base"
			}
			
			// Top Block Check
			"Condition"
			{
				"BlockType"
				{
					"Offset" "0 0 -1"
					"Type" "AIR PIT GOO"
				}
				"Result"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:top_pillar"
					}
				}
				"Else"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:top_seal"
						"force" "world"
					}
				}
			}
			
			// Left Block Check
			"Condition"
			{
				"BlockType"
				{
					"Offset" "0 1 0"
					"Type" "AIR PIT GOO"
				}
				"Result"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:left_pillar"
					}
				}
				"Else"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:left_seal"
						"force" "world"
					}
				}
			}
			
			// Left Corner Block Check
			"Condition"
			{
				"BlockType"
				{
					"Offset" "0 1 -1"
					"Type" "AIR PIT GOO"
				}
				"Result"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:left_corner"
					}
				}
			}
			
			// Right Block Check
			"Condition"
			{
				"BlockType"
				{
					"Offset" "0 -1 0"
					"Type" "AIR PIT GOO"
				}
				"Result"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:right_pillar"
					}
				}
				"Else"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:right_seal"
						"force" "world"
					}
				}
			}
			
			// Right Corner Block Check
			"Condition"
			{
				"BlockType"
				{
					"Offset" "0 -1 -1"
					"Type" "AIR PIT GOO"
				}
				"Result"
				{
					"TemplateBrush"
					{
						"ID" "%TEMP%:right_corner"
					}
				}
			}
			
			// Front Block Check
			//"Condition"
			//{
			//	"BlockType"
			//	{
			//		"Offset" "1 0 0"
			//		"Type" "VOID SOLID EMBED"
			//	}
			//	"Result"
			//	{
			//		"TemplateBrush"
			//		{
			//			"ID" "%TEMP%:front_seal"
			//			"force" "world"
			//		}
			//	}
			//}
			
			// Back Block Check
			//"Condition"
			//{
			//	"BlockType"
			//	{
			//		"Offset" "-1 0 0"
			//		"Type" "VOID SOLID EMBED"
			//	}
			//	"Result"
			//	{
			//		"TemplateBrush"
			//		{
			//			"ID" "%TEMP%:back_seal"
			//			"force" "world"
			//		}
			//	}
			//}
		}
	}
}
